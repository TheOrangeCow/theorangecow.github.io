<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Blog</title>
    <link rel="icon" href="images.ico" type="image/x-icon">
    <title>The Orange Cow</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>The Orange Cow</h1>
        <p>Welcome to my GitHub</p>
    </header>
    
    <nav>
        <a href="index.html">Home</a>
        <a href="projects.html">Projects</a>
        <a href="teamname132.html">Teamname132</a>
        <a href="blog.html">Blog</a>
    </nav>
    <h1>Blog Posts</h1>
    <div id="blog-container"></div>


    
    <div class="form-container">
        <h2>Add a New Post</h2>
        <form id="postForm">
            <input type="text" id="title" placeholder="Title" required>
            <input type="text" id="author" placeholder="Author" required>
            <textarea id="content" placeholder="Content" rows="5" required></textarea>
            <button type="submit">Submit</button>
        </form>
    </div>

    <footer>
        <p>&copy; 2024 The Orange Cow. All rights reserved.</p>
    </footer>
    
    <script>
        function fetchPosts() {
            fetch('https://house-778.org/blog/blog.php')
                .then(response => response.json())
                .then(posts => {
                    const blogContainer = document.getElementById('blog-container');
                    blogContainer.innerHTML = ''; 
                    posts.forEach(post => {
                        const postDiv = document.createElement('div');
                        postDiv.className = 'post';
                        postDiv.innerHTML = `
                            <div class="title">${post.title}</div>
                            <div class="author">By ${post.author}</div>
                            <div class="content">${post.content}</div>
                            <div class="date">Date: ${post.date}</div>
                            <div class="timestamp">Posted at: ${post.timestamp}</div>
                        `;
                        blogContainer.appendChild(postDiv);
                    });
                });
        }

        document.getElementById('postForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const title = document.getElementById('title').value;
            const author = document.getElementById('author').value;
            const content = document.getElementById('content').value;

            fetch('https://house-778.org/blog/blog.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ title, author, content })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    fetchPosts(); 
                    document.getElementById('postForm').reset();
                } else {
                    alert('Failed to submit the post');
                }
            });
        });


        fetchPosts();
    </script>
</body>
</html>
